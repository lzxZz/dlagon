<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="971px" preserveAspectRatio="none" style="width:1749px;height:971px;" version="1.1" viewBox="0 0 1749 971" width="1749px" zoomAndPan="magnify"><defs><filter height="300%" id="f1oa8ua3daakrw" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class IServer--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="177.6113" id="IServer" style="stroke: #A80036; stroke-width: 1.5;" width="229" x="736" y="783"/><ellipse cx="828.75" cy="799" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M831.7188,805.2031 L825.2813,805.2031 L825.2813,804 L827.2813,804 L827.2813,793.9844 L825.2813,793.9844 L825.2813,792.7813 L831.7188,792.7813 L831.7188,793.9844 L829.7188,793.9844 L829.7188,804 L831.7188,804 L831.7188,805.2031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="35" x="849.25" y="804.0742">IServer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="737" x2="964" y1="815" y2="815"/><ellipse cx="747" cy="827.9229" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="48" x="756" y="831.0742">void Run()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="744" y="839.7686"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="180" x="756" y="845.9199">void Gateway(Request&amp;, Response&amp;)</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="744" y="854.6143"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="189" x="756" y="860.7656">IHandler Route(Request&amp;, Response&amp;)</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="744" y="869.46"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="140" x="756" y="875.6113">Response &amp;Handle(Request)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="759" y="890.457"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="744" y="899.1514"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="54" x="756" y="905.3027">void Work()</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="744" y="932.8428"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="203" x="756" y="938.9941">INetServerSocketAdapter server_socket_</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="744" y="947.6885"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="126" x="756" y="953.8398">ThreadPool thread_pool_;</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="737" x2="825.5" y1="919.4971" y2="919.4971"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="50" x="825.5" y="923.6484">-数据成员-</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="875.5" x2="964" y1="919.4971" y2="919.4971"/><!--class IHandler--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="48" id="IHandler" style="stroke: #A80036; stroke-width: 1.5;" width="74" x="314.5" y="652.5"/><ellipse cx="329.5" cy="668.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M332.4688,674.7031 L326.0313,674.7031 L326.0313,673.5 L328.0313,673.5 L328.0313,663.4844 L326.0313,663.4844 L326.0313,662.2813 L332.4688,662.2813 L332.4688,663.4844 L330.4688,663.4844 L330.4688,673.5 L332.4688,673.5 L332.4688,674.7031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="42" x="343.5" y="673.5742">IHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="315.5" x2="387.5" y1="684.5" y2="684.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="315.5" x2="387.5" y1="692.5" y2="692.5"/><!--class INetServerSocketAdapter--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="92.5371" id="INetServerSocketAdapter" style="stroke: #A80036; stroke-width: 1.5;" width="188" x="903.5" y="630"/><ellipse cx="931.55" cy="646" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M934.5188,652.2031 L928.0813,652.2031 L928.0813,651 L930.0813,651 L930.0813,640.9844 L928.0813,640.9844 L928.0813,639.7813 L934.5188,639.7813 L934.5188,640.9844 L932.5188,640.9844 L932.5188,651 L934.5188,651 L934.5188,652.2031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="127" x="948.45" y="651.0742">INetServerSocketAdapter</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="904.5" x2="1090.5" y1="662" y2="662"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="904.5" x2="1090.5" y1="670" y2="670"/><ellipse cx="914.5" cy="682.9229" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="51" x="923.5" y="686.0742">void Bind()</text><ellipse cx="914.5" cy="697.7686" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="60" x="923.5" y="700.9199">void Listen()</text><ellipse cx="914.5" cy="712.6143" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="162" x="923.5" y="715.7656">INetClientSocketAdapter Accept()</text><!--class INetClientSocketAdapter--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="177.6113" id="INetClientSocketAdapter" style="stroke: #A80036; stroke-width: 1.5;" width="240" x="836.5" y="392"/><ellipse cx="890.25" cy="408" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M893.2188,414.2031 L886.7813,414.2031 L886.7813,413 L888.7813,413 L888.7813,402.9844 L886.7813,402.9844 L886.7813,401.7813 L893.2188,401.7813 L893.2188,402.9844 L891.2188,402.9844 L891.2188,413 L893.2188,413 L893.2188,414.2031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="124" x="910.75" y="413.0742">INetClientSocketAdapter</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="837.5" x2="1075.5" y1="424" y2="424"/><ellipse cx="847.5" cy="436.9229" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="57" x="856.5" y="440.0742">void Send();</text><ellipse cx="847.5" cy="451.7686" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="79" x="856.5" y="454.9199">string Receive();</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="859.5" y="469.7656"/><ellipse cx="847.5" cy="481.46" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="118" x="856.5" y="484.6113">Request&amp; GetRequest();</text><ellipse cx="847.5" cy="496.3057" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="134" x="856.5" y="499.457">Response&amp; GetResponse();</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="844.5" y="526.9971"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="856.5" y="533.1484">Response  *res_;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="844.5" y="549.2656"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="202" x="856.5" y="547.9941">Request   *req_; // 持有请求和响应对象,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="952.5" y="562.8398">在Client销毁的时候释放</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="837.5" x2="934.5" y1="513.6514" y2="513.6514"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="44" x="934.5" y="517.8027">数据成员</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="978.5" x2="1075.5" y1="513.6514" y2="513.6514"/><!--class ResponseHeader--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="48" id="ResponseHeader" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="1204" y="457"/><ellipse cx="1219" cy="473" fill="#0000FF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1214.4375,472.9844 Q1214.4375,469.6406 1215.4609,468.125 Q1216.4844,466.6094 1218.5156,466.6094 Q1220.6406,466.6094 1221.5313,467.125 L1221.5313,468.8281 Q1219.625,467.8438 1218.5938,467.8438 Q1216.7969,467.8438 1216.7969,472.9844 Q1216.7969,475.7813 1217.5078,476.9609 Q1218.2188,478.1406 1218.5938,478.1406 Q1219.6563,478.1406 1221.5938,477.0156 L1221.5938,478.8594 Q1220.7188,479.3594 1218.5156,479.3594 Q1216.4375,479.3594 1215.4375,477.8984 Q1214.4375,476.4375 1214.4375,472.9844 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="85" x="1233" y="478.0742">ResponseHeader</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1205" x2="1320" y1="489" y2="489"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1205" x2="1320" y1="497" y2="497"/><!--class RequestHeader--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="48" id="RequestHeader" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="17" y="457"/><ellipse cx="32" cy="473" fill="#0000FF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M27.4375,472.9844 Q27.4375,469.6406 28.4609,468.125 Q29.4844,466.6094 31.5156,466.6094 Q33.6406,466.6094 34.5313,467.125 L34.5313,468.8281 Q32.625,467.8438 31.5938,467.8438 Q29.7969,467.8438 29.7969,472.9844 Q29.7969,475.7813 30.5078,476.9609 Q31.2188,478.1406 31.5938,478.1406 Q32.6563,478.1406 34.5938,477.0156 L34.5938,478.8594 Q33.7188,479.3594 31.5156,479.3594 Q29.4375,479.3594 28.4375,477.8984 Q27.4375,476.4375 27.4375,472.9844 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="77" x="46" y="478.0742">RequestHeader</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="18" x2="125" y1="489" y2="489"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="18" x2="125" y1="497" y2="497"/><!--class ArgumentTable--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="48" id="ArgumentTable" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="678.5" y="457"/><ellipse cx="693.5" cy="473" fill="#0000FF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M688.9375,472.9844 Q688.9375,469.6406 689.9609,468.125 Q690.9844,466.6094 693.0156,466.6094 Q695.1406,466.6094 696.0313,467.125 L696.0313,468.8281 Q694.125,467.8438 693.0938,467.8438 Q691.2969,467.8438 691.2969,472.9844 Q691.2969,475.7813 692.0078,476.9609 Q692.7188,478.1406 693.0938,478.1406 Q694.1563,478.1406 696.0938,477.0156 L696.0938,478.8594 Q695.2188,479.3594 693.0156,479.3594 Q690.9375,479.3594 689.9375,477.8984 Q688.9375,476.4375 688.9375,472.9844 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="76" x="707.5" y="478.0742">ArgumentTable</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="679.5" x2="785.5" y1="489" y2="489"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="679.5" x2="785.5" y1="497" y2="497"/><!--class ResponseBody--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="48" id="ResponseBody" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="1372" y="457"/><ellipse cx="1387" cy="473" fill="#0000FF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1382.4375,472.9844 Q1382.4375,469.6406 1383.4609,468.125 Q1384.4844,466.6094 1386.5156,466.6094 Q1388.6406,466.6094 1389.5313,467.125 L1389.5313,468.8281 Q1387.625,467.8438 1386.5938,467.8438 Q1384.7969,467.8438 1384.7969,472.9844 Q1384.7969,475.7813 1385.5078,476.9609 Q1386.2188,478.1406 1386.5938,478.1406 Q1387.6563,478.1406 1389.5938,477.0156 L1389.5938,478.8594 Q1388.7188,479.3594 1386.5156,479.3594 Q1384.4375,479.3594 1383.4375,477.8984 Q1382.4375,476.4375 1382.4375,472.9844 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="73" x="1401" y="478.0742">ResponseBody</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1373" x2="1476" y1="489" y2="489"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1373" x2="1476" y1="497" y2="497"/><!--class RequestBody--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="48" id="RequestBody" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="524" y="457"/><ellipse cx="539" cy="473" fill="#0000FF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M534.4375,472.9844 Q534.4375,469.6406 535.4609,468.125 Q536.4844,466.6094 538.5156,466.6094 Q540.6406,466.6094 541.5313,467.125 L541.5313,468.8281 Q539.625,467.8438 538.5938,467.8438 Q536.7969,467.8438 536.7969,472.9844 Q536.7969,475.7813 537.5078,476.9609 Q538.2188,478.1406 538.5938,478.1406 Q539.6563,478.1406 541.5938,477.0156 L541.5938,478.8594 Q540.7188,479.3594 538.5156,479.3594 Q536.4375,479.3594 535.4375,477.8984 Q534.4375,476.4375 534.4375,472.9844 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="65" x="553" y="478.0742">RequestBody</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="525" x2="620" y1="489" y2="489"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="525" x2="620" y1="497" y2="497"/><!--class Response--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="48" id="Response" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="1104" y="284"/><ellipse cx="1119" cy="300" fill="#0000FF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1114.4375,299.9844 Q1114.4375,296.6406 1115.4609,295.125 Q1116.4844,293.6094 1118.5156,293.6094 Q1120.6406,293.6094 1121.5313,294.125 L1121.5313,295.8281 Q1119.625,294.8438 1118.5938,294.8438 Q1116.7969,294.8438 1116.7969,299.9844 Q1116.7969,302.7813 1117.5078,303.9609 Q1118.2188,305.1406 1118.5938,305.1406 Q1119.6563,305.1406 1121.5938,304.0156 L1121.5938,305.8594 Q1120.7188,306.3594 1118.5156,306.3594 Q1116.4375,306.3594 1115.4375,304.8984 Q1114.4375,303.4375 1114.4375,299.9844 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="49" x="1133" y="305.0742">Response</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1105" x2="1184" y1="316" y2="316"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1105" x2="1184" y1="324" y2="324"/><!--class RequestFactory--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="77.6914" id="RequestFactory" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="406.5" y="146"/><ellipse cx="446.7" cy="162" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M449.6688,168.2031 L443.2313,168.2031 L443.2313,167 L445.2313,167 L445.2313,156.9844 L443.2313,156.9844 L443.2313,155.7813 L449.6688,155.7813 L449.6688,156.9844 L447.6688,156.9844 L447.6688,167 L449.6688,167 L449.6688,168.2031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="78" x="466.3" y="167.0742">RequestFactory</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="407.5" x2="571.5" y1="178" y2="178"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="407.5" x2="571.5" y1="186" y2="186"/><ellipse cx="417.5" cy="198.9229" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="114" x="426.5" y="202.0742">Request *FromString();</text><ellipse cx="417.5" cy="213.7686" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="140" x="426.5" y="216.9199">RequestFactory GetInstant();</text><!--class HttpRequestFactory--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="77.6914" id="HttpRequestFactory" style="stroke: #A80036; stroke-width: 1.5;" width="209" x="468" y="8"/><ellipse cx="518.25" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M513.6875,23.9844 Q513.6875,20.6406 514.7109,19.125 Q515.7344,17.6094 517.7656,17.6094 Q519.8906,17.6094 520.7813,18.125 L520.7813,19.8281 Q518.875,18.8438 517.8438,18.8438 Q516.0469,18.8438 516.0469,23.9844 Q516.0469,26.7813 516.7578,27.9609 Q517.4688,29.1406 517.8438,29.1406 Q518.9063,29.1406 520.8438,28.0156 L520.8438,29.8594 Q519.9688,30.3594 517.7656,30.3594 Q515.6875,30.3594 514.6875,28.8984 Q513.6875,27.4375 513.6875,23.9844 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="538.75" y="29.0742">HttpRequestFactory</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="469" x2="676" y1="40" y2="40"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="469" x2="676" y1="48" y2="48"/><ellipse cx="479" cy="60.9229" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="157" x="488" y="64.0742">Request *FromString() override;</text><ellipse cx="479" cy="75.7686" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="183" x="488" y="78.9199">RequestFactory GetInstant() override;</text><path d="M1220,285.5 L1220,304 L1185,308 L1220,312 L1220,330.5898 A0,0 0 0 0 1220,330.5898 L1535,330.5898 A0,0 0 0 0 1535,330.5898 L1535,295.5 L1525,285.5 L1220,285.5 A0,0 0 0 0 1220,285.5 " fill="#FBFB77" filter="url(#f1oa8ua3daakrw)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1525,285.5 L1525,295.5 L1535,295.5 L1525,285.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="290" x="1226" y="304.7695">不需要工厂方法构造,构造函数返回一个空对象即可</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="1226" y="322.3145">将构造过程分散到具体的处理步骤中</text><!--class Request--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="48" id="Request" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="536" y="284"/><ellipse cx="551" cy="300" fill="#0000FF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M546.4375,299.9844 Q546.4375,296.6406 547.4609,295.125 Q548.4844,293.6094 550.5156,293.6094 Q552.6406,293.6094 553.5313,294.125 L553.5313,295.8281 Q551.625,294.8438 550.5938,294.8438 Q548.7969,294.8438 548.7969,299.9844 Q548.7969,302.7813 549.5078,303.9609 Q550.2188,305.1406 550.5938,305.1406 Q551.6563,305.1406 553.5938,304.0156 L553.5938,305.8594 Q552.7188,306.3594 550.5156,306.3594 Q548.4375,306.3594 547.4375,304.8984 Q546.4375,303.4375 546.4375,299.9844 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="41" x="565" y="305.0742">Request</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="537" x2="608" y1="316" y2="316"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="537" x2="608" y1="324" y2="324"/><!--class HttpResponse--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="48" id="HttpResponse" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="1093" y="161"/><ellipse cx="1108" cy="177" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1103.4375,176.9844 Q1103.4375,173.6406 1104.4609,172.125 Q1105.4844,170.6094 1107.5156,170.6094 Q1109.6406,170.6094 1110.5313,171.125 L1110.5313,172.8281 Q1108.625,171.8438 1107.5938,171.8438 Q1105.7969,171.8438 1105.7969,176.9844 Q1105.7969,179.7813 1106.5078,180.9609 Q1107.2188,182.1406 1107.5938,182.1406 Q1108.6563,182.1406 1110.5938,181.0156 L1110.5938,182.8594 Q1109.7188,183.3594 1107.5156,183.3594 Q1105.4375,183.3594 1104.4375,181.8984 Q1103.4375,180.4375 1103.4375,176.9844 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="71" x="1122" y="182.0742">HttpResponse</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1094" x2="1195" y1="193" y2="193"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1094" x2="1195" y1="201" y2="201"/><!--class HttpRequest--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="48" id="HttpRequest" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="608" y="161"/><ellipse cx="623" cy="177" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M618.4375,176.9844 Q618.4375,173.6406 619.4609,172.125 Q620.4844,170.6094 622.5156,170.6094 Q624.6406,170.6094 625.5313,171.125 L625.5313,172.8281 Q623.625,171.8438 622.5938,171.8438 Q620.7969,171.8438 620.7969,176.9844 Q620.7969,179.7813 621.5078,180.9609 Q622.2188,182.1406 622.5938,182.1406 Q623.6563,182.1406 625.5938,181.0156 L625.5938,182.8594 Q624.7188,183.3594 622.5156,183.3594 Q620.4375,183.3594 619.4375,181.8984 Q618.4375,180.4375 618.4375,176.9844 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="63" x="637" y="182.0742">HttpRequest</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="609" x2="702" y1="193" y2="193"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="609" x2="702" y1="201" y2="201"/><path d="M1000.5,832 L1000.5,868 L965.251,872 L1000.5,876 L1000.5,912.1797 A0,0 0 0 0 1000.5,912.1797 L1410.5,912.1797 A0,0 0 0 0 1410.5,912.1797 L1410.5,842 L1400.5,832 L1000.5,832 A0,0 0 0 0 1000.5,832 " fill="#FBFB77" filter="url(#f1oa8ua3daakrw)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1400.5,832 L1400.5,842 L1410.5,842 L1400.5,832 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="1006.5" y="851.2695">Work用于线程池中的部分,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="385" x="1006.5" y="868.8145">Run是程序的主流程, 使用一个死循环来接收请求,并分发到具体线程</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="245" x="1006.5" y="886.3594">Work在线程池中调度, 执行具体处理的流程</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="276" x="1006.5" y="903.9043">使用的时候, 从IServer继承, 并重写指定的类即可</text><!--class StaticHandler--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="48" id="StaticHandler" style="stroke: #A80036; stroke-width: 1.5;" width="101" x="161" y="457"/><ellipse cx="176" cy="473" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M171.4375,472.9844 Q171.4375,469.6406 172.4609,468.125 Q173.4844,466.6094 175.5156,466.6094 Q177.6406,466.6094 178.5313,467.125 L178.5313,468.8281 Q176.625,467.8438 175.5938,467.8438 Q173.7969,467.8438 173.7969,472.9844 Q173.7969,475.7813 174.5078,476.9609 Q175.2188,478.1406 175.5938,478.1406 Q176.6563,478.1406 178.5938,477.0156 L178.5938,478.8594 Q177.7188,479.3594 175.5156,479.3594 Q173.4375,479.3594 172.4375,477.8984 Q171.4375,476.4375 171.4375,472.9844 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="69" x="190" y="478.0742">StaticHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="162" x2="261" y1="489" y2="489"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="162" x2="261" y1="497" y2="497"/><!--class DynmicHandler--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="48" id="DynmicHandler" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="297" y="457"/><ellipse cx="312" cy="473" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M307.4375,472.9844 Q307.4375,469.6406 308.4609,468.125 Q309.4844,466.6094 311.5156,466.6094 Q313.6406,466.6094 314.5313,467.125 L314.5313,468.8281 Q312.625,467.8438 311.5938,467.8438 Q309.7969,467.8438 309.7969,472.9844 Q309.7969,475.7813 310.5078,476.9609 Q311.2188,478.1406 311.5938,478.1406 Q312.6563,478.1406 314.5938,477.0156 L314.5938,478.8594 Q313.7188,479.3594 311.5156,479.3594 Q309.4375,479.3594 308.4375,477.8984 Q307.4375,476.4375 307.4375,472.9844 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="77" x="326" y="478.0742">DynmicHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="298" x2="405" y1="489" y2="489"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="298" x2="405" y1="497" y2="497"/><!--class HttpResponseBody--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="48" id="HttpResponseBody" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="1372" y="652.5"/><ellipse cx="1387" cy="668.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1382.4375,668.4844 Q1382.4375,665.1406 1383.4609,663.625 Q1384.4844,662.1094 1386.5156,662.1094 Q1388.6406,662.1094 1389.5313,662.625 L1389.5313,664.3281 Q1387.625,663.3438 1386.5938,663.3438 Q1384.7969,663.3438 1384.7969,668.4844 Q1384.7969,671.2813 1385.5078,672.4609 Q1386.2188,673.6406 1386.5938,673.6406 Q1387.6563,673.6406 1389.5938,672.5156 L1389.5938,674.3594 Q1388.7188,674.8594 1386.5156,674.8594 Q1384.4375,674.8594 1383.4375,673.3984 Q1382.4375,671.9375 1382.4375,668.4844 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="95" x="1401" y="673.5742">HttpResponseBody</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1373" x2="1498" y1="684.5" y2="684.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1373" x2="1498" y1="692.5" y2="692.5"/><!--class HttpArgumentTable--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="48" id="HttpArgumentTable" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="667.5" y="652.5"/><ellipse cx="682.5" cy="668.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M677.9375,668.4844 Q677.9375,665.1406 678.9609,663.625 Q679.9844,662.1094 682.0156,662.1094 Q684.1406,662.1094 685.0313,662.625 L685.0313,664.3281 Q683.125,663.3438 682.0938,663.3438 Q680.2969,663.3438 680.2969,668.4844 Q680.2969,671.2813 681.0078,672.4609 Q681.7188,673.6406 682.0938,673.6406 Q683.1563,673.6406 685.0938,672.5156 L685.0938,674.3594 Q684.2188,674.8594 682.0156,674.8594 Q679.9375,674.8594 678.9375,673.3984 Q677.9375,671.9375 677.9375,668.4844 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="696.5" y="673.5742">HttpArgumentTable</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="668.5" x2="796.5" y1="684.5" y2="684.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="668.5" x2="796.5" y1="692.5" y2="692.5"/><!--class HttpResponseHeader--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="48" id="HttpResponseHeader" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1198" y="652.5"/><ellipse cx="1213" cy="668.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1208.4375,668.4844 Q1208.4375,665.1406 1209.4609,663.625 Q1210.4844,662.1094 1212.5156,662.1094 Q1214.6406,662.1094 1215.5313,662.625 L1215.5313,664.3281 Q1213.625,663.3438 1212.5938,663.3438 Q1210.7969,663.3438 1210.7969,668.4844 Q1210.7969,671.2813 1211.5078,672.4609 Q1212.2188,673.6406 1212.5938,673.6406 Q1213.6563,673.6406 1215.5938,672.5156 L1215.5938,674.3594 Q1214.7188,674.8594 1212.5156,674.8594 Q1210.4375,674.8594 1209.4375,673.3984 Q1208.4375,671.9375 1208.4375,668.4844 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="107" x="1227" y="673.5742">HttpResponseHeader</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1199" x2="1336" y1="684.5" y2="684.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1199" x2="1336" y1="692.5" y2="692.5"/><!--class HttpRequestBody--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="48" id="HttpRequestBody" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="513" y="652.5"/><ellipse cx="528" cy="668.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M523.4375,668.4844 Q523.4375,665.1406 524.4609,663.625 Q525.4844,662.1094 527.5156,662.1094 Q529.6406,662.1094 530.5313,662.625 L530.5313,664.3281 Q528.625,663.3438 527.5938,663.3438 Q525.7969,663.3438 525.7969,668.4844 Q525.7969,671.2813 526.5078,672.4609 Q527.2188,673.6406 527.5938,673.6406 Q528.6563,673.6406 530.5938,672.5156 L530.5938,674.3594 Q529.7188,674.8594 527.5156,674.8594 Q525.4375,674.8594 524.4375,673.3984 Q523.4375,671.9375 523.4375,668.4844 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="87" x="542" y="673.5742">HttpRequestBody</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="514" x2="631" y1="684.5" y2="684.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="514" x2="631" y1="692.5" y2="692.5"/><!--class HttpReqeustHeader--><rect fill="#FEFECE" filter="url(#f1oa8ua3daakrw)" height="48" id="HttpReqeustHeader" style="stroke: #A80036; stroke-width: 1.5;" width="131" x="6" y="652.5"/><ellipse cx="21" cy="668.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M16.4375,668.4844 Q16.4375,665.1406 17.4609,663.625 Q18.4844,662.1094 20.5156,662.1094 Q22.6406,662.1094 23.5313,662.625 L23.5313,664.3281 Q21.625,663.3438 20.5938,663.3438 Q18.7969,663.3438 18.7969,668.4844 Q18.7969,671.2813 19.5078,672.4609 Q20.2188,673.6406 20.5938,673.6406 Q21.6563,673.6406 23.5938,672.5156 L23.5938,674.3594 Q22.7188,674.8594 20.5156,674.8594 Q18.4375,674.8594 17.4375,673.3984 Q16.4375,671.9375 16.4375,668.4844 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="99" x="35" y="673.5742">HttpReqeustHeader</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="136" y1="684.5" y2="684.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="136" y1="692.5" y2="692.5"/><path d="M712.5,8.5 L712.5,85.9805 L1272.5,85.9805 L1272.5,18.5 L1262.5,8.5 L712.5,8.5 " fill="#FBFB77" filter="url(#f1oa8ua3daakrw)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1262.5,8.5 L1262.5,18.5 L1272.5,18.5 L1262.5,8.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="25" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="531" x="718.5" y="40.9414">图中没有给出详细的组合, 聚合, 继承, 等关系,</text><text fill="#000000" font-family="sans-serif" font-size="25" lengthAdjust="spacingAndGlyphs" textLength="0" x="1257.5" y="40.9414"/><text fill="#000000" font-family="sans-serif" font-size="25" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="208" x="718.5" y="74.6816">仅给出了依赖关系</text><path d="M1308,25 L1308,68.7402 L1737,68.7402 L1737,35 L1727,25 L1308,25 " fill="#FBFB77" filter="url(#f1oa8ua3daakrw)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1727,25 L1727,35 L1737,35 L1727,25 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="25" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="408" x="1314" y="57.4414">对于图中的基类, 使用蓝色背景表示</text><!--link INetServerSocketAdapter to IServer--><path d="M959.435,727.605 C946.574,744.536 931.809,763.971 917.387,782.956 " fill="none" id="INetServerSocketAdapter-IServer" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="962.663,723.357,954.0338,728.1043,959.6386,727.3386,960.4043,732.9434,962.663,723.357" style="stroke: #A80036; stroke-width: 1.0;"/><!--link INetClientSocketAdapter to IServer--><path d="M906.546,575.247 C898.519,593.047 891.042,611.81 885.5,630 C870.435,679.442 861.777,736.622 856.842,782.874 " fill="none" id="INetClientSocketAdapter-IServer" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="908.823,570.253,901.45,576.7829,906.7489,574.8025,908.7293,580.1014,908.823,570.253" style="stroke: #A80036; stroke-width: 1.0;"/><!--link IHandler to IServer--><path d="M393.393,702.493 C406.058,709.569 420.151,716.977 433.5,723 C533.109,767.939 650.774,808.633 735.673,835.924 " fill="none" id="IHandler-IServer" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="388.796,699.904,394.6764,707.8047,393.153,702.3568,398.6009,700.8334,388.796,699.904" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Response to IServer--><path d="M1150.8,337.196 C1165.16,408.959 1192.84,601.437 1108.5,723 C1073.14,773.961 1036.44,752.385 982.5,783 C976.751,786.263 970.92,789.687 965.073,793.214 " fill="none" id="Response-IServer" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1149.8,332.24,1147.675,341.8569,1150.7971,337.1396,1155.5144,340.2616,1149.8,332.24" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Request to IServer--><path d="M543.876,335.907 C529.904,350.937 514.43,370.866 506.5,392 C454.787,529.809 413.865,600.52 495.5,723 C548.643,802.732 653.754,839.581 735.873,856.569 " fill="none" id="Request-IServer" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="547.39,332.193,538.299,335.9815,543.9537,335.825,544.1102,341.4797,547.39,332.193" style="stroke: #A80036; stroke-width: 1.0;"/><!--link INetClientSocketAdapter to INetServerSocketAdapter--><path d="M975.2,570.256 C979.162,588.955 983.215,608.08 986.759,624.808 " fill="none" id="INetClientSocketAdapter-INetServerSocketAdapter" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="987.842,629.92,989.8909,620.2866,986.8063,625.0285,982.0644,621.9438,987.842,629.92" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Response to INetClientSocketAdapter--><path d="M1115.41,335.459 C1098.53,350.814 1076.19,371.136 1053.61,391.675 " fill="none" id="Response-INetClientSocketAdapter" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1119.15,332.062,1109.7975,335.1491,1115.4477,335.4225,1115.1743,341.0728,1119.15,332.062" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Request to INetClientSocketAdapter--><path d="M614.313,321.558 C661.276,336.225 739.32,362.297 803.5,392 C814.345,397.019 825.437,402.552 836.449,408.324 " fill="none" id="Request-INetClientSocketAdapter" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="609.306,320.001,616.711,326.4946,614.0802,321.4867,619.0881,318.8559,609.306,320.001" style="stroke: #A80036; stroke-width: 1.0;"/><!--link StaticHandler to IHandler--><path d="M228.387,505.341 C254.315,541.176 303.825,609.607 331.506,647.866 " fill="none" id="StaticHandler-IHandler" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="334.771,652.378,332.7359,642.7417,331.84,648.3272,326.2545,647.4313,334.771,652.378" style="stroke: #A80036; stroke-width: 1.0;"/><!--link DynmicHandler to IHandler--><path d="M351.5,505.341 C351.5,540.885 351.5,608.496 351.5,646.927 " fill="none" id="DynmicHandler-IHandler" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="351.5,652.378,355.5,643.378,351.5,647.378,347.5,643.378,351.5,652.378" style="stroke: #A80036; stroke-width: 1.0;"/><!--link HttpRequest to Request--><path d="M639.693,209.044 C625.935,229.1 605.967,258.211 591.374,279.484 " fill="none" id="HttpRequest-Request" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="588.531,283.63,596.9197,278.4696,591.3587,279.5064,590.3219,273.9453,588.531,283.63" style="stroke: #A80036; stroke-width: 1.0;"/><!--link HttpResponse to Response--><path d="M1144.5,209.044 C1144.5,228.766 1144.5,257.243 1144.5,278.414 " fill="none" id="HttpResponse-Response" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1144.5,283.63,1148.5,274.63,1144.5,278.63,1140.5,274.63,1144.5,283.63" style="stroke: #A80036; stroke-width: 1.0;"/><!--link RequestFactory to Request--><path d="M518.621,228.453 C531.363,247.029 545.818,268.102 556.546,283.742 " fill="none" id="RequestFactory-Request" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="515.762,224.285,517.5552,233.9692,518.5906,228.408,524.1519,229.4434,515.762,224.285" style="stroke: #A80036; stroke-width: 1.0;"/><!--link HttpRequestFactory to RequestFactory--><path d="M549.159,86.246 C538.727,103.338 526.389,123.556 515.648,141.156 " fill="none" id="HttpRequestFactory-RequestFactory" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="512.953,145.57,521.0551,139.9703,515.5571,141.3017,514.2258,135.8037,512.953,145.57" style="stroke: #A80036; stroke-width: 1.0;"/><!--link HttpRequestFactory to HttpRequest--><path d="M598.457,90.532 C612.654,113.794 629.688,141.705 641.424,160.935 " fill="none" id="HttpRequestFactory-HttpRequest" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="595.841,86.246,597.1138,96.0123,598.4451,90.5143,603.9431,91.8457,595.841,86.246" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Response to ResponseBody--><path d="M1185.15,325.399 C1238,346.873 1325.16,382.865 1338.5,392 C1363.24,408.947 1386.71,433.77 1402.86,452.735 " fill="none" id="Response-ResponseBody" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1406.4,456.932,1403.6467,447.4758,1403.173,453.1128,1397.536,452.639,1406.4,456.932" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Response to ArgumentTable--><path d="M1104,312.237 C1039.62,318.872 911.717,338.243 818.5,392 C792.178,407.18 768.556,432.659 752.76,452.306 " fill="none" id="Response-ArgumentTable" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="749.312,456.656,758.037,452.0872,752.4177,452.7375,751.7674,447.1181,749.312,456.656" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Response to ResponseHeader--><path d="M1160.41,332.062 C1181.97,363.296 1220.39,418.974 1243.45,452.395 " fill="none" id="Response-ResponseHeader" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1246.46,456.757,1244.6392,447.0779,1243.6196,452.6421,1238.0554,451.6226,1246.46,456.757" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Request to RequestBody--><path d="M572.5,332.062 C572.5,363.041 572.5,418.066 572.5,451.572 " fill="none" id="Request-RequestBody" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="572.5,456.757,576.5,447.757,572.5,451.757,568.5,447.757,572.5,456.757" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Request to ArgumentTable--><path d="M594.078,332.062 C623.423,363.423 675.825,419.429 707.052,452.803 " fill="none" id="Request-ArgumentTable" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="710.753,456.757,707.524,447.4525,707.3366,453.1062,701.6828,452.9188,710.753,456.757" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Request to RequestHeader--><path d="M535.822,312.862 C444.627,322.97 210.188,352.199 143.5,392 C119.232,406.484 99.5884,432.292 86.9873,452.227 " fill="none" id="Request-RequestHeader" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="84.2501,456.642,92.3918,451.1001,86.8845,452.3923,85.5923,446.885,84.2501,456.642" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ResponseBody to HttpResponseBody--><path d="M1426.11,510.338 C1428.3,548.806 1432.16,616.821 1434.19,652.378 " fill="none" id="ResponseBody-HttpResponseBody" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1425.83,505.341,1422.3473,514.5535,1426.1138,510.3329,1430.3344,514.0994,1425.83,505.341" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ArgumentTable to HttpArgumentTable--><path d="M732.5,510.81 C732.5,549.36 732.5,616.966 732.5,652.378 " fill="none" id="ArgumentTable-HttpArgumentTable" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="732.5,505.341,728.5,514.341,732.5,510.341,736.5,514.341,732.5,505.341" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ResponseHeader to HttpResponseHeader--><path d="M1263.24,510.81 C1264.24,549.36 1265.99,616.966 1266.9,652.378 " fill="none" id="ResponseHeader-HttpResponseHeader" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1263.1,505.341,1259.3327,514.4408,1263.2285,510.3393,1267.33,514.2352,1263.1,505.341" style="stroke: #A80036; stroke-width: 1.0;"/><!--link RequestBody to HttpRequestBody--><path d="M572.5,510.81 C572.5,549.36 572.5,616.966 572.5,652.378 " fill="none" id="RequestBody-HttpRequestBody" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="572.5,505.341,568.5,514.341,572.5,510.341,576.5,514.341,572.5,505.341" style="stroke: #A80036; stroke-width: 1.0;"/><!--link RequestHeader to HttpReqeustHeader--><path d="M71.5,510.81 C71.5,549.36 71.5,616.966 71.5,652.378 " fill="none" id="RequestHeader-HttpReqeustHeader" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="71.5,505.341,67.5,514.341,71.5,510.341,75.5,514.341,71.5,505.341" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml "server_uml"




interface IServer{
   + void Run() 
   - {abstract} void Gateway(Request&, Response&)
   - {abstract} IHandler Route(Request&, Response&)
   - {abstract} Response &Handle(Request)

   - void Work()
   - - -数据成员- - -
   - INetServerSocketAdapter server_socket_
   - ThreadPool thread_pool_;
}
interface IHandler{

}
interface INetServerSocketAdapter{
   + {abstract} void Bind()
   + {abstract} void Listen()
   + {abstract} INetClientSocketAdapter Accept()

}

interface INetClientSocketAdapter{
   + {abstract} void Send();
   + {abstract} string Receive();
   
   + Request& GetRequest();
   + Response& GetResponse();
   - -数据成员- -
   - Response  *res_;
   - Request   *req_; // 持有请求和响应对象,    \n                                在Client销毁的时候释放
}


class ResponseHeader << (C, blue)>>{

}
class RequestHeader << (C, blue)>>{

}
class ArgumentTable << (C, blue)>>{

}
class ResponseBody << (C, blue)>>{

}
class RequestBody << (C, blue)>>{

}

class Response << (C, blue)>>{

}

interface RequestFactory{
   + {abstract} Request *FromString();
   + {abstract} RequestFactory GetInstant();
}

class HttpRequestFactory{
   + Request *FromString() override;
   + RequestFactory GetInstant() override;
}

note right of Response : 不需要工厂方法构造,构造函数返回一个空对象即可 \n将构造过程分散到具体的处理步骤中

class Request << (C, blue)>>{

}
class HttpResponse{

}

class HttpRequest{

}


note right of IServer : Work用于线程池中的部分, \nRun是程序的主流程, 使用一个死循环来接收请求,并分发到具体线程 \nWork在线程池中调度, 执行具体处理的流程 \n使用的时候, 从IServer继承, 并重写指定的类即可




INetServerSocketAdapter <.. IServer 
INetClientSocketAdapter <.. IServer 
IHandler                <.. IServer 
Response                <.. IServer
Request                 <.. IServer

INetClientSocketAdapter ..> INetServerSocketAdapter
Response    <.. INetClientSocketAdapter
Request     <.. INetClientSocketAdapter





StaticHandler ..> IHandler
DynmicHandler ..> IHandler

HttpRequest    ..> Request
HttpResponse   ..> Response


RequestFactory <.. Request
HttpRequestFactory ..> RequestFactory 
HttpRequestFactory <.. HttpRequest


Response    ..> ResponseBody  
Response    ..> ArgumentTable 
Response    ..> ResponseHeader


Request    ..> RequestBody  
Request    ..> ArgumentTable 
Request    ..> RequestHeader

ResponseBody    <.. HttpResponseBody    
ArgumentTable   <.. HttpArgumentTable   
ResponseHeader  <.. HttpResponseHeader  



RequestBody       <.. HttpRequestBody  
RequestHeader     <.. HttpReqeustHeader

note "<size : 25><b>图中没有给出详细的组合, 聚合, 继承, 等关系,</b> \n<size : 25><b>仅给出了依赖关系</b>" as N1

note "<size : 25><b>对于图中的基类, 使用蓝色背景表示</b>" as N2

@enduml

PlantUML version 1.2019.03(Sun Mar 10 19:04:44 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_191-b12
Operating System: Linux
OS Version: 4.9.0-8-amd64
Default Encoding: UTF-8
Language: zh
Country: CN
--></g></svg>